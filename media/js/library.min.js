document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('[library-import="container"]').forEach(function(a){let url=a.getAttribute("data-url"),button=a.querySelector('[library-import="button"]'),field=a.querySelector('input[type="file"]');if(button){button.addEventListener("click",function(){let request=new XMLHttpRequest(),requestUrl=url,formData=new FormData();Array.from(field.files).forEach(function(b){formData.append("files[]",b)});request.open("POST",requestUrl);request.send(formData);request.onreadystatechange=function(){if(this.readyState===4&&this.status===200){let response=false;try{response=JSON.parse(this.response)}catch(b){response=false;Joomla.renderMessages({error:[b.message]});return}if(response.success){Joomla.renderMessages({success:[response.data[0]]});setTimeout(function(){window.location.reload()},1500)}else{Joomla.renderMessages({error:[response.message]});console.error(response.message)}}else{if(this.readyState===4&&this.status!==200){Joomla.renderMessages({error:[request.message]})}}}})}});document.querySelectorAll('[library-export="container"]').forEach(function(a){let url=a.getAttribute("data-url"),button=a.querySelector('[library-export="button"]');if(button){button.addEventListener("click",function(){let checkboxes=a.querySelectorAll('input[type="checkbox"]'),keys=[];checkboxes.forEach(function(b){if(b.checked){keys.push(b.value)}});let winUrl=url;if(keys.length>0){winUrl=winUrl+keys.join(",")}let win=window.open(winUrl,"_blank");win.focus()})}})});